# Go 基础语法与数据类型

## 变量声明

1. 标准声明
```go
var name string = "John"
var age int = 20
var isStudent bool = true
```
2. 类型推断
```go
var name = "John"
var age = 20
var isStudent = true
```
3. 短变量声明
```go
name := "John"
age := 20
isStudent := true
```
4. 多变量声明
```go
var name, age, isStudent = "John", 20, true
```
5. 多变量声明并赋值
```go
name, age, isStudent := "John", 20, true
```
> 注意：短变量声明 `:=` 只能在函数内部使用
> 左边变量必须是新变量，不能是已经声明过的变量

## 基本数据类型

### 整型（int）

整型是用来表示整数的类型，包括有符号整型和无符号整型。
有符号整型：int8、int16、int32、int64
无符号整型：uint8、uint16、uint32、uint64

```go
var age int = 20
var age8 int8 = 20
var age16 int16 = 20
var age32 int32 = 20
var age64 int64 = 20
```

### 浮点型（float）

浮点型是用来表示浮点数的类型，包括单精度浮点型和双精度浮点型。
单精度浮点型：float32
双精度浮点型：float64

```go
var pi float32 = 3.14
var pi64 float64 = 3.14
```
> Go 中默认使用 float64 类型

### 布尔类型（bool）

`true` 和 `false` 是布尔类型的两个值
```go
var isStudent bool = true
```

### 字符串（string）

字符串特点：
- 字符串是不可变的
- 使用 UTF-8 编码
- 字符串可以使用 + 号拼接
```go
var name string = "John"
name2 := "Jane"
name3 := name + name2
fmt.Println(name3)
```

#### 字符串拼接

- 加号 +
- fmt.Sprintf()
- strings.Builder

```go
username := "bobby"
age := 18
address := "北京"
mobile := "18989898989"

var ages []int = []int{1,2,3}

fmt.Println("用户名: " + username, ",年龄: "+strconv.Itoa(age) + ",地址: "+address, ", 电话: "+mobile)// 极难维护
fmt.Printf("用户名:%s, 年龄: %d, ,地址:%s, 电话: %s\r\n", username, age, address, mobile) // 这个非常的常用， 但是性能没有上面的好
userMsg := fmt.Sprintf("用户名:%T, 年龄: %T, ,地址:%s, 电话: %s\r\n", ages, age, address, mobile)
fmt.Println(userMsg)

// 通过string的builder进行字符串拼接， 高性能
var builder strings.Builder
builder.WriteString("用户名:")
builder.WriteString(username)
builder.WriteString(",年龄:")
builder.WriteString(strconv.Itoa(age))
builder.WriteString(",地址:")
builder.WriteString(address)
builder.WriteString(", 电话: ")
builder.WriteString(mobile)

re := builder.String()
fmt.Println(re)
```

#### strings的常用方法

- 是否包含 strings.Contains()
- 出现次数 strings.Count()
- 替换 strings.Replace()
- 分割 strings.Split()
- 拼接 strings.Join()
- 子串出现的位置 strings.Index() / strings.LastIndex()
- 是否包含前缀 strings.HasPrefix()
- 是否包含后缀 strings.HasSuffix()
- 大小写转换 strings.ToLower() / strings.ToUpper()
- 去除空格 strings.TrimSpace()
- 去掉特殊字符 strings.Trim()

### 字符类型（byte/rune）

字符类型是用来表示字符的类型，包括 byte 和 rune。
byte 是用来表示一个字节的类型，范围是 0-255。
rune 是用来表示一个 Unicode(中文、日文、韩文等) 字符的类型，范围是 0-65535。
```go
var c1 byte = 'A'
var c2 rune = '中'
```

例子：如何将字符串首字母改成大写

```go
func capitalize(s string) string {
	r := []rune(s)
	if len(r) > 0 {
		r[0] = r[0] - 32
	}
	return string(r)
}
```

### 零值（默认值）

| 类型     | 默认值   |
| ------ | ----- |
| int    | 0     |
| float  | 0     |
| bool   | false |
| string | ""    |
| 指针     | nil   |

```go
var x int
fmt.Println(x) // 0
var y float
fmt.Println(y) // 0
var z bool
fmt.Println(z) // false
var s string
fmt.Println(s) // ""
var p *int
fmt.Println(p) // nil
```
### 常量

常量用 const 关键字声明，常量在声明时必须赋值，且不能修改。
```go
const name string = "John"
const age int = 20
const isStudent bool = true
// 批量定义
const (
  A = 1
  B = 2
  C = 3
)
```
> 注意：常量在声明时必须赋值，且不能修改

### iota (枚举神器)

iota 是 Go 语言的常量计数器，只能在常量表达式中使用。
iota 从 0 开始，每行递增 1。
```go
const (
  A = iota // 0
  B        // 1
  C        // 2
)
```
常用于：
- 枚举
- 状态码
- 递增常量

### 类型转换
类型转换是用来将一个数据类型转换为另一个数据类型的过程。
```go
var age int = 20
var ageFloat float64 = float64(age)
fmt.Println(ageFloat)
```
> 注意：Go 不支持隐式类型转换

### fmt

fmt 是 Go 标准库中最常用的包，用于格式化输出 / 输入 / 字符串构造

| 分类      | 函数                       |
| ------- | ------------------------ |
| 标准输出    | Print / Println / Printf |
| 字符串格式化  | Sprintf                  |
| 写入到指定对象 | Fprint / Fprintf         |
| 标准输入    | Scan / Scanf / Scanln    |
| 错误输出    | Fprintln(os.Stderr)      |

1. fmt.Print
标准输出，不换行
```go
fmt.Print("Hello, World!")
```
2. fmt.Println（最常用）
标准输出，换行。特点：自动换行、自动加空格
```go
fmt.Println("Hello, World!")
```
3. fmt.Printf
格式化输出
```go
fmt.Printf("Hello, %s!", name)
```
格式化占位符:

| 占位符   | 说明        |
| ----- | --------- |
| `%v`  | 默认格式（最常用） |
| `%+v` | 结构体字段名    |
| `%#v` | Go 语法表示   |
| `%T`  | 类型        |
| `%d`  | 整数        |
| `%e`  | 科学计数法        |
| `%f`  | 浮点数        |
| `%.2f` | 浮点数（保留2位小数） |
| `%g`  | 浮点数（根据精度自动选择） |
| `%s`  | 字符串        |
| `%t`  | 布尔值        |
| `%c`  | 字符        |
| `%b`  | 二进制        |
| `%o`  | 八进制        |
| `%x`  | 十六进制        |
| `%X`  | 十六进制（大写）        |
| `%U`  | Unicode 字符        |
| `%p`  | 指针        |
| `%q`  | 带引号的字符串        |

4. fmt.Sprintf
格式化输出，返回字符串，不直接输出
```go
result := fmt.Sprintf("Hello, %s!", name)
fmt.Println(result)
```
常用于：
- 日志
- 拼接 SQL/文本
- 构造错误信息

5. fmt.Fprint
写入到指定对象。常用于：文件、网络、数据库等
```go
fmt.Fprint(os.Stdout, "Hello, World!")
```
6. fmt.Scan
标准输入，读取用户输入
```go
var name string
fmt.Scan(&name)
```
7. fmt.Scanf
标准输入，读取用户输入
```go
fmt.Scanf("%s", &name)
```
8. fmt.Scanln
标准输入，读取用户输入
```go
fmt.Scanln(&name)
```

#### 结构体打印

```go
type Person struct {
  Name string
  Age int
  Email string
}
person := Person{
  Name: "John",
  Age: 20,
  Email: "john@example.com",
}
fmt.Printf("%v\n", person)
fmt.Printf("%+v", person)
fmt.Printf("%#v\n", person)
```
输出：
```
{John 20 john@example.com}
{Name:John Age:20 Email:john@example.com}
main.Person{Name:"John", Age:20, Email:"john@example.com"}
```

#### 错误格式化

```go
err := errors.New("this is an error")
fmt.Println(err)
// 等价于
fmt.Fprintln(os.Stderr, "this is an error")
```

#### 推荐使用场景

| 场景   | 推荐       |
| ---- | -------- |
| 简单打印 | Println  |
| 格式化  | Printf   |
| 拼字符串 | Sprintf  |
| 写文件  | Fprintln |
| 错误   | Errorf   |

> fmt = 输出 + 格式化 + 输入
> Printf + 占位符 是核心中的核心
